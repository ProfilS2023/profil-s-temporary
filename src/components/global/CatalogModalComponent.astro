---

---

<dialog id="catalog-dialog">
  <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16" onclick="this.parentNode.close()">
    <path
      d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"
    ></path>
  </svg>

  <form id="catalog-form">
    <h4>Сделать заказ</h4>
    <p>Пожалуйста, заполните форму и мы свяжемся с вами в ближайшее время.</p>

    <label>
      ФИО
      <input type="text" name="fullname" id="fullname" required />
    </label>

    <label>
      Телефон
      <input type="text" name="phone" id="phone" required />
    </label>

    <label>
      Комментарий к заказу
      <textarea name="message" id="message" cols="30" rows="5"></textarea>
    </label>

    <ul>
      <li>
        <input type="checkbox" name="" id="" />

        Согласен с <a href="../../docs/Политика_обработки_персональных_данных.doc" download>политикой обработки персональных данных</a>
      </li>
      <li>
        <input type="checkbox" name="" id="" />

        Согласен с <a href="../../docs/Положение_об_обработке_персональных_данных.doc" download>положением об обработке персональных данных</a>
      </li>
    </ul>

    <button class="button">Отправить</button>
  </form>

  <div id="success-message" style="display: none; text-align: center;">
    <h4>Спасибо за обращение!</h4>
    <p>Мы получили вашу заявку и свяжемся с вами в ближайшее время.</p>
  </div>
</dialog>

<style lang="scss">
  dialog {
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(13, 36, 55, 0.15);
    padding: 40px;

    svg {
      cursor: pointer;
      position: absolute;
      right: 20px;
      top: 20px;
      z-index: 2;
    }

    span {
      display: block;
      margin-top: 20px;
      max-width: 620px;
    }

    a {
      text-decoration: underline;
    }

    form {
      display: grid;
      gap: 20px;
      margin: 40px 0 0;
      position: relative;

      label {
        display: grid;

        input,
        textarea {
          border: 1px solid #eeeeee;
          margin: 10px 0 0;
          padding: 10px;
        }

        button {
          grid-column: 1 / -1;
          margin: auto;
        }
      }
    }
  }

  ul {
    grid-column: 1 / -1;
    li {
      input[type="checkbox"] {
        border: 1px solid #333;
        width: 15px;
        height: 15px;
        margin-right: 10px;

        &:checked {
          background-color: rgb(var(--c-theme-lighter));
        }
      }
    }
  }

  @media only screen and (max-width: 640px) {
    dialog {
      form {
        label {
          grid-column: 1;
        }
      }
    }
  }
</style>

<script>
  const form = document.querySelector("#catalog-form") as HTMLFormElement;
  const successMessage = document.querySelector("#success-message") as HTMLElement;

  form.addEventListener("submit", async (event) => {
    event.preventDefault();

    const formData = new FormData(form);
    const data = Object.fromEntries(formData);

    try {
      await fetch("https://xn----otbjkeglu8e.xn--p1ai/catalog-form.php", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data),
      });

      form.style.display = "none";
      successMessage.style.display = "block";
    } catch (error) {
      console.log(error);
    }
  });
</script>
